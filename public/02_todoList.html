<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>02_todoList</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      li {
        list-style: none;
      }
      span {
        line-height: 1;
      }
      input[type="radio"] {
        display: none;
      }
      input[type="radio"] + label {
        flex: 1 0 auto;
        font-size: 14px;
        line-height: 1;
        text-align: center;
        padding: 5px;
        border-radius: 5px;
        background: #f3f8fc;
        color: #66747e;
      }
      input[type="radio"]:checked + label {
        background: #2369ef;
        color: #fff;
      }

      #wrap {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100vw;
        height: 100vh;
      }
      #todoWrap {
        margin: 0;
        padding: 20px;
        border: 1px solid black;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        gap: 10px;
      }
      #todoWrap h1 {
        line-height: 1;
      }
      #todoWrap button {
        line-height: 1;
        padding: 8px 5px;
        border: 0 none;
        border-radius: 5px;
        font-size: 14px;
        line-height: 1;
        background: #2369ef;
        color: #fff;
      }
      #todoWrap #todoForm {
        display: flex;
        flex-direction: column;
        gap: 10px;
        width: 300px;
      }
      #todoWrap #todoForm input[type="text"] {
        padding: 10px;
        border-radius: 5px;
        border: 1px solid black;
        font-size: 14px;
        line-height: 1;
      }
      #importantWrap,
      #todoTap {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        width: 100%;
      }
      #todoList {
        margin-top: 10px;
      }
      #todoList li {
        margin-top: 10px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
    </style>
  </head>
  <body>
    <div id="wrap">
      <!-- 
        3Ïùº Ï∞® ÎØ∏ÏÖò : To-Do Î¶¨Ïä§Ìä∏ ÎßåÎì§Í∏∞
        
        * ÏöîÏ≤≠ÏÇ¨Ìï≠
        üí°Ìï† ÏùºÏùÑ ÏûëÏÑ±Ìï† Ïàò ÏûàÎäî ÏòÅÏó≠Ïù¥ Ï°¥Ïû¨ÌïúÎã§.
        üí°Ìï† ÏùºÏùò Ïö∞ÏÑ†ÏàúÏúÑÎ•º ÏßÄÏ†ïÌï† Ïàò ÏûàÎã§(ÎÇÆÏùå, Î≥¥ÌÜµ, ÎÜíÏùå, ÏïÑÏ£º ÎÜíÏùå) + (ÏÑ†ÌÉùÏÇ¨Ìï≠) Ïö∞ÏÑ† ÏàúÏúÑ Î≥Ñ UI ÎòêÎäî ÏïÑÏù¥ÏΩòÏùÑ ÎÑ£Ïñ¥ÏÑú Í∞ïÏ°∞Ìï† Ïàò ÏûàÎã§.
        üí°Ìï† Ïùº Ï∂îÍ∞ÄÌïòÍ∏∞ Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ Ìï† Ïùº Î™©Î°ùÏóê ÏûëÏÑ±Îêú ÎÇ¥Ïö©Ïù¥ Ï∂îÍ∞ÄÎêúÎã§.
        üí°Ï∂îÍ∞ÄÎêú ÎÇ¥Ïö©ÏùÄ ÏàòÏ†ïÌï† Ïàò ÏûàÎã§.
        üí°Ìï† Ïùº Î™©Î°ùÏùÄ Ìï¥Í≤∞/ÎØ∏Ìï¥Í≤∞ÏùÑ Ï≤¥ÌÅ¨Î∞ïÏä§Î•º Ïù¥Ïö©Ìï¥ Ï≤òÎ¶¨Ìï† Ïàò ÏûàÎã§.
        üí°Î¶¨Ïä§Ìä∏Îäî Ï†ÑÏ≤¥/Ìï¥Í≤∞/ÎØ∏Ìï¥Í≤∞Î°ú Î∂ÑÎ¶¨Ìï¥ÏÑú ÎÇòÏó¥Ìï† Ïàò ÏûàÎã§. + (ÏÑ†ÌÉùÏÇ¨Ìï≠) Ïö∞ÏÑ†ÏàúÏúÑ ÎÜíÏùÄÏàú/ÎÇÆÏùÄÏàúÏúºÎ°ú Ï†ïÎ†¨Ìï† Ïàò ÏûàÎã§. 
      -->
      <div id="todoWrap">
        <h1>TODO LIST</h1>
        <div id="todoForm">
          <input
            type="text"
            id="todo"
            name="todo"
            placeholder="Ìï† ÏùºÏùÑ ÏûëÏÑ±Ìï¥Ï£ºÏÑ∏Ïöî"
          />
          <div id="importantWrap">
            <input
              type="radio"
              id="important1"
              name="todoImportant"
              value="0"
            />
            <label for="important1">ÏïÑÏ£º ÎÜíÏùå</label>
            <input
              type="radio"
              id="important2"
              name="todoImportant"
              value="1"
            />
            <label for="important2">ÎÜíÏùå</label>
            <input
              type="radio"
              id="important3"
              name="todoImportant"
              value="2"
            />
            <label for="important3">Î≥¥ÌÜµ</label>
            <input
              type="radio"
              id="important4"
              name="todoImportant"
              value="3"
            />
            <label for="important4">ÎÇÆÏùå</label>
          </div>
          <button id="addBtn" onclick="addEvt()">Ï∂îÍ∞Ä</button>
          <div id="todoTap">
            <input
              type="radio"
              id="todoVal1"
              name="todoVal"
              value="0"
              onclick="writeTodo()"
            />
            <label for="todoVal1">Ï†ÑÏ≤¥</label>
            <input
              type="radio"
              id="todoVal2"
              name="todoVal"
              value="1"
              onclick="writeTodo()"
            />
            <label for="todoVal2">ÏôÑÎ£å</label>
            <input
              type="radio"
              id="todoVal3"
              name="todoVal"
              value="2"
              onclick="writeTodo()"
            />
            <label for="todoVal3">ÎØ∏ÏôÑÎ£å</label>
          </div>
          <ul id="todoList"></ul>
        </div>
      </div>
    </div>
    <script>
      const todo = document.querySelector("#todo");
      const todoList = document.querySelector("#todoList");
      let todoDataGroup = [];

      document.querySelector("#important1").checked = true;
      document.querySelector("#todoVal1").checked = true;

      // Ï∂îÍ∞Ä Ïù¥Î≤§Ìä∏
      function addEvt() {
        if (
          todo.value !== "" &&
          todo.value !== undefined &&
          todo.value !== null &&
          String(todo.value).length > 0
        ) {
          const todoImportant = document.querySelector(
            "input[name='todoImportant']:checked"
          ).value;

          todoDataGroup.push({
            value: todo.value,
            rating: todoImportant,
            checked: false,
          });

          writeTodo();
        } else {
          alert("Ìï† ÏùºÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî");
        }
      }

      // Ï≤¥ÌÅ¨ ÌôïÏù∏ Ïù¥Î≤§Ìä∏
      function checkEvt(num) {
        let editData = todoDataGroup.map((item, index) =>
          index === num
            ? { value: item.value, rating: item.rating, checked: !item.checked }
            : item
        );
        todoDataGroup = editData;
        writeTodo();
      }

      // ÏàòÏ†ï Ïù¥Î≤§Ìä∏
      function editEvt(num) {
        const editTxt = document.querySelector(`#todoData${num}`).value;

        let editData = todoDataGroup.map((item, index) =>
          index === num && item.value != editTxt
            ? { value: editTxt, rating: item.rating, checked: item.checked }
            : item
        );
        todoDataGroup = editData;
        writeTodo();
      }

      // Ï∂úÎ†• Ïù¥Î≤§Ìä∏
      function writeTodo() {
        const todoVal = document.querySelector(
          "input[name='todoVal']:checked"
        ).value;

        let todoHtml = "";
        let listGroup = todoDataGroup;
        if (todoVal == 1) {
          listGroup = todoDataGroup.filter((item) => item.checked);
        } else if (todoVal == 2) {
          listGroup = todoDataGroup.filter((item) => !item.checked);
        }

        for (let i = 0; i < listGroup.length; i++) {
          let importantColor = "orange";
          let importantTxt = "ÎÇÆÏùå";
          if (listGroup[i].rating == 0) {
            importantColor = "red";
            importantTxt = "ÏïÑÏ£º ÎÜíÏùå";
          } else if (listGroup[i].rating == 1) {
            importantColor = "blue";
            importantTxt = "ÎÜíÏùå";
          } else if (listGroup[i].rating == 2) {
            importantColor = "green";
            importantTxt = "Î≥¥ÌÜµ";
          }

          let chkVal = listGroup[i].checked == true ? "checked" : "";
          todoHtml += `<li><label for="todo${i}">
                              <input type="checkbox" id="todo${i}" name="todo" value="${listGroup[i].value}" ${chkVal} onClick="checkEvt(${i})"/>
                              (<span style="color:${importantColor};">${importantTxt}</span>)
                              <input type="text" id="todoData${i}" name="todoData${i}" placeholder="Ìï† ÏùºÏùÑ ÏûëÏÑ±Ìï¥Ï£ºÏÑ∏Ïöî" value="${listGroup[i].value}" />
                            </label>
                            <button id="eidtBtn" onclick="editEvt(${i})">ÏàòÏ†ï</button>
                      </li>`;
        }
        todoList.innerHTML = todoHtml;
      }
    </script>
  </body>
</html>
